import{b as be,u as _e,i as y,G as Ve,D as re,K as O,L as k,U as C,v as Ne,a as he,y as Ie,M as D,z as ge,A as ye,p as se,_ as Se,J as ee,N as Ee,O as we,E as te,P as Ce,Q as Pe,R as xe,w as Te,q as Ae}from"./el-input-4371304d.js";import{E as Fe,a as ke}from"./el-radio-4cfa22c1.js";import{z as ne,d as X,j as F,a0 as Be,e as P,w as ze,k as ue,a3 as Me,o as E,c as G,h as ae,u as a,n as H,B as L,r as U,m as le,f as b,a4 as Re,g as _,q as J,l as K,x as $e,G as De,a as x,C as Q,D as Le,E as Ue,_ as Ke}from"./index-1e8ff839.js";const Oe=100,Ge=600,oe={beforeMount(o,S){const s=S.value,{interval:n=Oe,delay:h=Ge}=ne(s)?{}:s;let c,v;const r=()=>ne(s)?s():s.handler(),V=()=>{v&&(clearTimeout(v),v=void 0),c&&(clearInterval(c),c=void 0)};o.addEventListener("mousedown",w=>{w.button===0&&(V(),r(),document.addEventListener("mouseup",()=>V(),{once:!0}),v=setTimeout(()=>{c=setInterval(()=>{r()},n)},h))})}},Ye=be({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:_e,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:o=>o===null||y(o)||["min","max"].includes(o),default:null},name:String,placeholder:String,precision:{type:Number,validator:o=>o>=0&&o===Number.parseInt(`${o}`,10)},validateEvent:{type:Boolean,default:!0},...Ve(["ariaLabel"])}),qe={[re]:(o,S)=>S!==o,blur:o=>o instanceof FocusEvent,focus:o=>o instanceof FocusEvent,[O]:o=>y(o)||k(o),[C]:o=>y(o)||k(o)},We=X({name:"ElInputNumber"}),je=X({...We,props:Ye,emits:qe,setup(o,{expose:S,emit:s}){const n=o,{t:h}=Ne(),c=he("input-number"),v=F(),r=Be({currentValue:n.modelValue,userInput:null}),{formItem:V}=Ie(),w=P(()=>y(n.modelValue)&&n.modelValue<=n.min),Y=P(()=>y(n.modelValue)&&n.modelValue>=n.max),i=P(()=>{const e=z(n.step);return D(n.precision)?Math.max(z(n.modelValue),e):(e>n.precision,n.precision)}),u=P(()=>n.controls&&n.controlsPosition==="right"),p=ge(),I=ye(),T=P(()=>{if(r.userInput!==null)return r.userInput;let e=r.currentValue;if(k(e))return"";if(y(e)){if(Number.isNaN(e))return"";D(n.precision)||(e=e.toFixed(n.precision))}return e}),A=(e,t)=>{if(D(t)&&(t=i.value),t===0)return Math.round(e);let l=String(e);const m=l.indexOf(".");if(m===-1||!l.replace(".","").split("")[m+t])return e;const R=l.length;return l.charAt(R-1)==="5"&&(l=`${l.slice(0,Math.max(0,R-1))}6`),Number.parseFloat(Number(l).toFixed(t))},z=e=>{if(k(e))return 0;const t=e.toString(),l=t.indexOf(".");let m=0;return l!==-1&&(m=t.length-l-1),m},N=(e,t=1)=>y(e)?A(e+n.step*t):r.currentValue,q=()=>{if(n.readonly||I.value||Y.value)return;const e=Number(T.value)||0,t=N(e);M(t),s(O,r.currentValue),j()},W=()=>{if(n.readonly||I.value||w.value)return;const e=Number(T.value)||0,t=N(e,-1);M(t),s(O,r.currentValue),j()},Z=(e,t)=>{const{max:l,min:m,step:d,precision:g,stepStrictly:R,valueOnClear:$}=n;l<m&&xe("InputNumber","min should not be greater than max.");let f=Number(e);if(k(e)||Number.isNaN(f))return null;if(e===""){if($===null)return null;f=$e($)?{min:m,max:l}[$]:$}return R&&(f=A(Math.round(f/d)*d,g),f!==e&&t&&s(C,f)),D(g)||(f=A(f,g)),(f>l||f<m)&&(f=f>l?l:m,t&&s(C,f)),f},M=(e,t=!0)=>{var l;const m=r.currentValue,d=Z(e);if(!t){s(C,d);return}m===d&&e||(r.userInput=null,s(C,d),m!==d&&s(re,d,m),n.validateEvent&&((l=V==null?void 0:V.validate)==null||l.call(V,"change").catch(g=>ee())),r.currentValue=d)},ie=e=>{r.userInput=e;const t=e===""?null:Number(e);s(O,t),M(t,!1)},ce=e=>{const t=e!==""?Number(e):"";(y(t)&&!Number.isNaN(t)||e==="")&&M(t),j(),r.userInput=null},de=()=>{var e,t;(t=(e=v.value)==null?void 0:e.focus)==null||t.call(e)},me=()=>{var e,t;(t=(e=v.value)==null?void 0:e.blur)==null||t.call(e)},pe=e=>{s("focus",e)},fe=e=>{var t;r.userInput=null,s("blur",e),n.validateEvent&&((t=V==null?void 0:V.validate)==null||t.call(V,"blur").catch(l=>ee()))},j=()=>{r.currentValue!==n.modelValue&&(r.currentValue=n.modelValue)},ve=e=>{document.activeElement===e.target&&e.preventDefault()};return ze(()=>n.modelValue,(e,t)=>{const l=Z(e,!0);r.userInput===null&&l!==t&&(r.currentValue=l)},{immediate:!0}),ue(()=>{var e;const{min:t,max:l,modelValue:m}=n,d=(e=v.value)==null?void 0:e.input;if(d.setAttribute("role","spinbutton"),Number.isFinite(l)?d.setAttribute("aria-valuemax",String(l)):d.removeAttribute("aria-valuemax"),Number.isFinite(t)?d.setAttribute("aria-valuemin",String(t)):d.removeAttribute("aria-valuemin"),d.setAttribute("aria-valuenow",r.currentValue||r.currentValue===0?String(r.currentValue):""),d.setAttribute("aria-disabled",String(I.value)),!y(m)&&m!=null){let g=Number(m);Number.isNaN(g)&&(g=null),s(C,g)}d.addEventListener("wheel",ve,{passive:!1})}),Me(()=>{var e,t;const l=(e=v.value)==null?void 0:e.input;l==null||l.setAttribute("aria-valuenow",`${(t=r.currentValue)!=null?t:""}`)}),S({focus:de,blur:me}),(e,t)=>(E(),G("div",{class:H([a(c).b(),a(c).m(a(p)),a(c).is("disabled",a(I)),a(c).is("without-controls",!e.controls),a(c).is("controls-right",a(u))]),onDragstart:J(()=>{},["prevent"])},[e.controls?ae((E(),G("span",{key:0,role:"button","aria-label":a(h)("el.inputNumber.decrease"),class:H([a(c).e("decrease"),a(c).is("disabled",a(w))]),onKeydown:L(W,["enter"])},[U(e.$slots,"decrease-icon",{},()=>[b(a(te),null,{default:_(()=>[a(u)?(E(),K(a(Ee),{key:0})):(E(),K(a(we),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[a(oe),W]]):le("v-if",!0),e.controls?ae((E(),G("span",{key:1,role:"button","aria-label":a(h)("el.inputNumber.increase"),class:H([a(c).e("increase"),a(c).is("disabled",a(Y))]),onKeydown:L(q,["enter"])},[U(e.$slots,"increase-icon",{},()=>[b(a(te),null,{default:_(()=>[a(u)?(E(),K(a(Ce),{key:0})):(E(),K(a(Pe),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[a(oe),q]]):le("v-if",!0),b(a(se),{id:e.id,ref_key:"input",ref:v,type:"number",step:e.step,"model-value":a(T),placeholder:e.placeholder,readonly:e.readonly,disabled:a(I),size:a(p),max:e.max,min:e.min,name:e.name,"aria-label":e.ariaLabel,"validate-event":!1,onKeydown:[L(J(q,["prevent"]),["up"]),L(J(W,["prevent"]),["down"])],onBlur:fe,onFocus:pe,onInput:ie,onChange:ce},Re({_:2},[e.$slots.prefix?{name:"prefix",fn:_(()=>[U(e.$slots,"prefix")])}:void 0,e.$slots.suffix?{name:"suffix",fn:_(()=>[U(e.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var He=Se(je,[["__file","input-number.vue"]]);const Je=Te(He);const B=o=>(Le("data-v-b02c699b"),o=o(),Ue(),o),Qe={class:"container"},Xe=B(()=>x("span",null,"px",-1)),Ze={class:"operators"},et=B(()=>x("span",null,"1rem = ",-1)),tt=B(()=>x("span",null,"px",-1)),nt=B(()=>x("span",{class:"label"},"精度：",-1)),at=B(()=>x("span",{class:"label"},"舍入：",-1)),lt=X({__name:"remCompute",setup(o){const S=De(),s=F(),n=F(10),h=F(2),c=F(0),v=P(()=>{if(!s.value)return;const i=s.value/n.value,u=Math.pow(10,h.value);let p;switch(c.value){case 1:p=Math.ceil(i*u)/u;break;case 2:p=Math.floor(i*u)/u;break;default:p=Math.round(i*u)/u}return p}),r=i=>i&&localStorage.setItem("remBaseSize",`${i}`),V=i=>i&&localStorage.setItem("remPrecision",`${i}`),w=i=>localStorage.setItem("remRoundType",`${i}`);return(()=>{const i=localStorage.getItem("remBaseSize");i&&(n.value=parseFloat(i));const u=localStorage.getItem("remPrecision");u&&(h.value=parseInt(u));const p=localStorage.getItem("remRoundType");p&&(c.value=parseInt(p))})(),ue(()=>{var i;(i=S.value)==null||i.focus()}),(i,u)=>{const p=Je,I=Fe,T=ke,A=se,z=Ae;return E(),G("div",Qe,[b(z,null,{default:_(()=>[b(p,{ref_key:"inputRef",ref:S,modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=N=>s.value=N),min:0,controls:!1,class:"input"},{suffix:_(()=>[Xe]),_:1},8,["modelValue"]),x("div",Ze,[b(p,{modelValue:n.value,"onUpdate:modelValue":u[1]||(u[1]=N=>n.value=N),min:1,controls:!1,"value-on-clear":10,onChange:r},{prefix:_(()=>[et]),suffix:_(()=>[tt]),_:1},8,["modelValue"]),nt,b(p,{modelValue:h.value,"onUpdate:modelValue":u[2]||(u[2]=N=>h.value=N),precision:0,min:0,onChange:V},null,8,["modelValue"]),at,b(T,{modelValue:c.value,"onUpdate:modelValue":u[3]||(u[3]=N=>c.value=N),onChange:w},{default:_(()=>[b(I,{value:0},{default:_(()=>[Q("四舍五入")]),_:1}),b(I,{value:1},{default:_(()=>[Q("向上取整")]),_:1}),b(I,{value:2},{default:_(()=>[Q("向下取整")]),_:1})]),_:1},8,["modelValue"])]),b(A,{"model-value":a(v),class:"output",readonly:""},null,8,["model-value"])]),_:1})])}}});const ut=Ke(lt,[["__scopeId","data-v-b02c699b"]]);export{ut as default};
