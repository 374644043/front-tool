import{b as ve,u as be,i as I,c as Ne,d as _e,C as re,I as K,e as M,U as C,f as Ve,g as ge,h as ye,j as z,k as Ee,l as Ie,a as oe,_ as Se,t as he,m as Z,n as we,o as Ae,p as ee,q as Ce,r as Te,w as Pe,E as xe}from"./el-input-5c7b67ae.js";import{E as Fe,a as Me}from"./el-radio-87dcf4a1.js";import{i as ne,d as J,r as F,j as Re,k as T,l as ke,m as ue,n as Be,o as h,c as G,p as te,u as r,q as X,f as D,s as L,t as ae,e as b,v as $e,w as N,h as H,x as ze,y as U,z as De,a as A,g as Y,_ as Le}from"./index-4a01b7a0.js";const Ue=100,Ke=600,le={beforeMount(u,S){const s=S.value,{interval:a=Ue,delay:g=Ke}=ne(s)?{}:s;let d,p;const o=()=>ne(s)?s():s.handler(),_=()=>{p&&(clearTimeout(p),p=void 0),d&&(clearInterval(d),d=void 0)};u.addEventListener("mousedown",w=>{w.button===0&&(_(),o(),document.addEventListener("mouseup",()=>_(),{once:!0}),p=setTimeout(()=>{d=setInterval(()=>{o()},a)},g))})}},Ge=ve({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.MAX_SAFE_INTEGER},min:{type:Number,default:Number.MIN_SAFE_INTEGER},modelValue:{type:[Number,null]},readonly:Boolean,disabled:Boolean,size:be,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:u=>u===null||I(u)||["min","max"].includes(u),default:null},name:String,placeholder:String,precision:{type:Number,validator:u=>u>=0&&u===Number.parseInt(`${u}`,10)},validateEvent:{type:Boolean,default:!0},...Ne(["ariaLabel"]),inputmode:{type:_e(String),default:void 0}}),Oe={[re]:(u,S)=>S!==u,blur:u=>u instanceof FocusEvent,focus:u=>u instanceof FocusEvent,[K]:u=>I(u)||M(u),[C]:u=>I(u)||M(u)},je=J({name:"ElInputNumber"}),qe=J({...je,props:Ge,emits:Oe,setup(u,{expose:S,emit:s}){const a=u,{t:g}=Ve(),d=ge("input-number"),p=F(),o=Re({currentValue:a.modelValue,userInput:null}),{formItem:_}=ye(),w=T(()=>I(a.modelValue)&&a.modelValue<=a.min),O=T(()=>I(a.modelValue)&&a.modelValue>=a.max),i=T(()=>{const e=R(a.step);return z(a.precision)?Math.max(R(a.modelValue),e):(e>a.precision,a.precision)}),t=T(()=>a.controls&&a.controlsPosition==="right"),f=Ee(),y=Ie(),P=T(()=>{if(o.userInput!==null)return o.userInput;let e=o.currentValue;if(M(e))return"";if(I(e)){if(Number.isNaN(e))return"";z(a.precision)||(e=e.toFixed(a.precision))}return e}),x=(e,n)=>{if(z(n)&&(n=i.value),n===0)return Math.round(e);let l=String(e);const c=l.indexOf(".");if(c===-1||!l.replace(".","").split("")[c+n])return e;const B=l.length;return l.charAt(B-1)==="5"&&(l=`${l.slice(0,Math.max(0,B-1))}6`),Number.parseFloat(Number(l).toFixed(n))},R=e=>{if(M(e))return 0;const n=e.toString(),l=n.indexOf(".");let c=0;return l!==-1&&(c=n.length-l-1),c},V=(e,n=1)=>I(e)?e>=Number.MAX_SAFE_INTEGER&&n===1||e<=Number.MIN_SAFE_INTEGER&&n===-1?e:x(e+a.step*n):o.currentValue,j=()=>{if(a.readonly||y.value||O.value)return;const e=Number(P.value)||0,n=V(e);k(n),s(K,o.currentValue),W()},q=()=>{if(a.readonly||y.value||w.value)return;const e=Number(P.value)||0,n=V(e,-1);k(n),s(K,o.currentValue),W()},Q=(e,n)=>{const{max:l,min:c,step:m,precision:E,stepStrictly:B,valueOnClear:$}=a;l<c&&he("InputNumber","min should not be greater than max.");let v=Number(e);if(M(e)||Number.isNaN(v))return null;if(e===""){if($===null)return null;v=ze($)?{min:c,max:l}[$]:$}return B&&(v=x(Math.round(v/m)*m,E),v!==e&&n&&s(C,v)),z(E)||(v=x(v,E)),(v>l||v<c)&&(v=v>l?l:c,n&&s(C,v)),v},k=(e,n=!0)=>{var l;const c=o.currentValue,m=Q(e);if(!n){s(C,m);return}c===m&&e||(o.userInput=null,s(C,m),c!==m&&s(re,m,c),a.validateEvent&&((l=_==null?void 0:_.validate)==null||l.call(_,"change").catch(E=>Z())),o.currentValue=m)},se=e=>{o.userInput=e;const n=e===""?null:Number(e);s(K,n),k(n,!1)},ie=e=>{const n=e!==""?Number(e):"";(I(n)&&!Number.isNaN(n)||e==="")&&k(n),W(),o.userInput=null},de=()=>{var e,n;(n=(e=p.value)==null?void 0:e.focus)==null||n.call(e)},ce=()=>{var e,n;(n=(e=p.value)==null?void 0:e.blur)==null||n.call(e)},me=e=>{s("focus",e)},pe=e=>{var n,l;o.userInput=null,o.currentValue===null&&((n=p.value)!=null&&n.input)&&(p.value.input.value=""),s("blur",e),a.validateEvent&&((l=_==null?void 0:_.validate)==null||l.call(_,"blur").catch(c=>Z()))},W=()=>{o.currentValue!==a.modelValue&&(o.currentValue=a.modelValue)},fe=e=>{document.activeElement===e.target&&e.preventDefault()};return ke(()=>a.modelValue,(e,n)=>{const l=Q(e,!0);o.userInput===null&&l!==n&&(o.currentValue=l)},{immediate:!0}),ue(()=>{var e;const{min:n,max:l,modelValue:c}=a,m=(e=p.value)==null?void 0:e.input;if(m.setAttribute("role","spinbutton"),Number.isFinite(l)?m.setAttribute("aria-valuemax",String(l)):m.removeAttribute("aria-valuemax"),Number.isFinite(n)?m.setAttribute("aria-valuemin",String(n)):m.removeAttribute("aria-valuemin"),m.setAttribute("aria-valuenow",o.currentValue||o.currentValue===0?String(o.currentValue):""),m.setAttribute("aria-disabled",String(y.value)),!I(c)&&c!=null){let E=Number(c);Number.isNaN(E)&&(E=null),s(C,E)}m.addEventListener("wheel",fe,{passive:!1})}),Be(()=>{var e,n;const l=(e=p.value)==null?void 0:e.input;l==null||l.setAttribute("aria-valuenow",`${(n=o.currentValue)!=null?n:""}`)}),S({focus:de,blur:ce}),(e,n)=>(h(),G("div",{class:X([r(d).b(),r(d).m(r(f)),r(d).is("disabled",r(y)),r(d).is("without-controls",!e.controls),r(d).is("controls-right",r(t))]),onDragstart:H(()=>{},["prevent"])},[e.controls?te((h(),G("span",{key:0,role:"button","aria-label":r(g)("el.inputNumber.decrease"),class:X([r(d).e("decrease"),r(d).is("disabled",r(w))]),onKeydown:D(q,["enter"])},[L(e.$slots,"decrease-icon",{},()=>[b(r(ee),null,{default:N(()=>[r(t)?(h(),U(r(we),{key:0})):(h(),U(r(Ae),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[r(le),q]]):ae("v-if",!0),e.controls?te((h(),G("span",{key:1,role:"button","aria-label":r(g)("el.inputNumber.increase"),class:X([r(d).e("increase"),r(d).is("disabled",r(O))]),onKeydown:D(j,["enter"])},[L(e.$slots,"increase-icon",{},()=>[b(r(ee),null,{default:N(()=>[r(t)?(h(),U(r(Ce),{key:0})):(h(),U(r(Te),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[r(le),j]]):ae("v-if",!0),b(r(oe),{id:e.id,ref_key:"input",ref:p,type:"number",step:e.step,"model-value":r(P),placeholder:e.placeholder,readonly:e.readonly,disabled:r(y),size:r(f),max:e.max,min:e.min,name:e.name,"aria-label":e.ariaLabel,"validate-event":!1,inputmode:e.inputmode,onKeydown:[D(H(j,["prevent"]),["up"]),D(H(q,["prevent"]),["down"])],onBlur:pe,onFocus:me,onInput:se,onChange:ie},$e({_:2},[e.$slots.prefix?{name:"prefix",fn:N(()=>[L(e.$slots,"prefix")])}:void 0,e.$slots.suffix?{name:"suffix",fn:N(()=>[L(e.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","inputmode","onKeydown"])],42,["onDragstart"]))}});var We=Se(qe,[["__file","input-number.vue"]]);const Xe=Pe(We);const He={class:"container"},Ye={class:"operators"},Je=J({__name:"remCompute",setup(u){const S=De(),s=F(),a=F(10),g=F(2),d=F(0),p=T(()=>{if(!s.value)return;const i=s.value/a.value,t=Math.pow(10,g.value);let f;switch(d.value){case 1:f=Math.ceil(i*t)/t;break;case 2:f=Math.floor(i*t)/t;break;default:f=Math.round(i*t)/t}return f}),o=i=>i&&localStorage.setItem("remBaseSize",`${i}`),_=i=>i&&localStorage.setItem("remPrecision",`${i}`),w=i=>localStorage.setItem("remRoundType",`${i}`);return(()=>{const i=localStorage.getItem("remBaseSize");i&&(a.value=parseFloat(i));const t=localStorage.getItem("remPrecision");t&&(g.value=parseInt(t));const f=localStorage.getItem("remRoundType");f&&(d.value=parseInt(f))})(),ue(()=>{var i;(i=S.value)==null||i.focus()}),(i,t)=>{const f=Xe,y=Fe,P=Me,x=oe,R=xe;return h(),G("div",He,[b(R,null,{default:N(()=>[b(f,{ref_key:"inputRef",ref:S,modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=V=>s.value=V),min:0,controls:!1,class:"input"},{suffix:N(()=>t[4]||(t[4]=[A("span",null,"px",-1)])),_:1},8,["modelValue"]),A("div",Ye,[b(f,{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=V=>a.value=V),min:1,controls:!1,"value-on-clear":10,onChange:o},{prefix:N(()=>t[5]||(t[5]=[A("span",null,"1rem = ",-1)])),suffix:N(()=>t[6]||(t[6]=[A("span",null,"px",-1)])),_:1},8,["modelValue"]),t[10]||(t[10]=A("span",{class:"label"},"精度：",-1)),b(f,{modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=V=>g.value=V),precision:0,min:0,onChange:_},null,8,["modelValue"]),t[11]||(t[11]=A("span",{class:"label"},"舍入：",-1)),b(P,{modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=V=>d.value=V),onChange:w},{default:N(()=>[b(y,{value:0},{default:N(()=>t[7]||(t[7]=[Y("四舍五入")])),_:1,__:[7]}),b(y,{value:1},{default:N(()=>t[8]||(t[8]=[Y("向上取整")])),_:1,__:[8]}),b(y,{value:2},{default:N(()=>t[9]||(t[9]=[Y("向下取整")])),_:1,__:[9]})]),_:1},8,["modelValue"])]),b(x,{"model-value":p.value,class:"output",readonly:""},null,8,["model-value"])]),_:1})])}}});const nn=Le(Je,[["__scopeId","data-v-b02c699b"]]);export{nn as default};
